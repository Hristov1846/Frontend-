<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YouVibe</title>
  <meta name="description" content="YouVibe ‚Äî Vibe ‚Ä¢ Connect ‚Ä¢ Battle ‚Ä¢ LIVE ‚Ä¢ –ü–æ—Ä—Ç–º–æ–Ω–µ ‚Ä¢ AI –ø—Å–∏—Ö–æ–ª–æ–≥" />
  <style>
    :root{
      --bg1:#7b2ff7; --bg2:#00d4ff; --glass:rgba(255,255,255,.12);
      --text:#0b0b0f; --white:#ffffff; --muted:rgba(255,255,255,.7);
      --card:rgba(255,255,255,.15); --input:rgba(0,0,0,.6);
      --ok:#22c55e; --warn:#f59e0b; --err:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;color:var(--white);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      background: radial-gradient(1100px 800px at -10% -10%, #ff5ac8 0%, transparent 60%),
                  radial-gradient(1000px 800px at 110% -30%, #25d5ff 0%, transparent 60%),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      background-attachment: fixed;
    }
    .wrap{max-width:980px;margin:0 auto;padding:16px 20px 80px}
    .nav{
      display:flex;align-items:center;gap:16px;padding:12px 4px 24px;
    }
    .logo{
      width:64px;height:64px;border-radius:18px;
      background: radial-gradient(120% 120% at 0% 0%, #8affff 0%, #827dff 50%, #ff7edb 100%);
      display:grid;place-items:center;font-weight:800;line-height:1;box-shadow:0 8px 28px rgba(0,0,0,.25);
    }
    .brand{font-size:26px;font-weight:800;letter-spacing:.3px}
    .links{margin-left:auto;display:flex;flex-wrap:wrap;gap:10px}
    .links a{
      color:var(--white);text-decoration:none;font-weight:600;opacity:.9;
      padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.08)
    }
    h1{font-size:48px;margin:10px 0 6px}
    .tag{font-size:18px;color:var(--muted);margin:0 0 26px}
    .grid{display:grid;gap:16px}
    @media(min-width:800px){ .grid{grid-template-columns:1.2fr .8fr} }

    .card{
      background:var(--card);backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.18); border-radius:18px; padding:18px;
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
    }
    .pill{
      background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.2);
      padding:14px 18px;border-radius:16px;font-size:20px;text-align:center
    }
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      font-weight:800;border:0;border-radius:14px;padding:14px 18px;
      background:linear-gradient(90deg,#7b2ff7,#00d4ff); color:#fff; text-decoration:none;
      box-shadow:0 10px 28px rgba(0,0,0,.35); width:100%
    }
    .btn[disabled]{opacity:.6;filter:saturate(.6);cursor:not-allowed}
    .muted{color:var(--muted);font-size:14px}
    .stack{display:grid;gap:12px}
    .row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
    input,select{
      width:100%; color:#fff; font:inherit; font-weight:600;
      background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.22);
      border-radius:12px; padding:14px 12px; outline:none;
    }
    input::placeholder{color:#e8e8e8;opacity:.7}
    .msg{font-size:14px;margin-top:6px}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .err{color:var(--err)}
    .news{display:grid;gap:12px;margin-top:6px}
    .news-item{
      padding:12px;border-radius:14px;background:rgba(0,0,0,.28);
      border:1px solid rgba(255,255,255,.12)
    }
    footer{margin-top:28px;color:var(--muted);font-size:13px}
    .hide{display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <nav class="nav">
      <div class="logo"><div style="text-align:center">You<br/>Vibe</div></div>
      <div class="brand">YouVibe</div>
      <div class="links">
        <a href="#/">–ù–∞—á–∞–ª–æ</a>
        <a href="#/live">LIVE</a>
        <a href="#/battles">–ë–∏—Ç–∫–∏</a>
        <a href="#/wallet">–ü–æ—Ä—Ç–º–æ–Ω–µ</a>
        <a href="#/profile">–ü—Ä–æ—Ñ–∏–ª</a>
        <a href="#/auth">–í—Ö–æ–¥</a>
      </div>
    </nav>

    <!-- HOME -->
    <section id="page-home">
      <h1>YouVibe</h1>
      <p class="tag">Vibe ‚Ä¢ Connect ‚Ä¢ Battle ‚Äî —Ä–µ–∞–ª–Ω–∏ –±–∏—Ç–∫–∏, —Ä–µ–∞–ª–Ω–∏ –¥–∞—Ä–µ–Ω–∏—è, AI –ø—Å–∏—Ö–æ–ª–æ–≥, Marketplace –∏ –æ—â–µ.</p>
      <div class="grid">
        <div class="card">
          <div class="pill">75% –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è</div>
          <div class="pill" style="margin-top:10px">25% –∑–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ç–∞</div>
          <div class="pill" style="margin-top:10px">1‚Ç¨ = 500 VC &nbsp;<span class="muted">(–±–æ–Ω—É—Å +1000 VC ‚â• 20‚Ç¨)</span></div>
          <div id="apiStatus" class="msg warn" style="margin-top:10px">API: –ø—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ‚Ä¶</div>
          <div style="display:grid;gap:10px;margin-top:16px">
            <a class="btn" href="#/auth">–ó–∞–ø–æ—á–Ω–∏ —Å–µ–≥–∞</a>
            <a class="btn" href="#/battles" style="filter:brightness(.9)">–í–∏–∂ –±–∏—Ç–∫–∏—Ç–µ</a>
          </div>
        </div>
        <div class="card">
          <h3 style="margin:0 0 8px">–ù–∞ –∂–∏–≤–æ</h3>
          <div id="liveList" class="news">
            <div class="news-item">–ù—è–º–∞ –∞–∫—Ç–∏–≤–Ω–∏ –∏–∑–ª—ä—á–≤–∞–Ω–∏—è –≤ –º–æ–º–µ–Ω—Ç–∞.</div>
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h3 style="margin:0 0 8px">–ù–æ–≤–∏–Ω–∏</h3>
        <div id="newsList" class="news"></div>
      </div>

      <footer>¬© YouVibe 2025 ¬∑ <a href="#/terms" style="color:#fff">–£—Å–ª–æ–≤–∏—è</a> ¬∑ <a href="#/privacy" style="color:#fff">–ü–æ–≤–µ—Ä–∏—Ç–µ–ª–Ω–æ—Å—Ç</a></footer>
    </section>

    <!-- AUTH -->
    <section id="page-auth" class="hide">
      <h1 style="margin-bottom:16px">–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
      <div class="grid">
        <!-- LOGIN -->
        <div class="card">
          <h3 style="margin:0 0 10px">–í—Ö–æ–¥</h3>
          <form id="loginForm" class="stack">
            <input id="loginEmail" type="email" placeholder="–ò–º–µ–π–ª" required />
            <input id="loginPass" type="password" placeholder="–ü–∞—Ä–æ–ª–∞" required />
            <button id="loginBtn" class="btn" type="submit">–í—Ö–æ–¥</button>
            <div id="loginMsg" class="msg"></div>
          </form>
        </div>

        <!-- REGISTER -->
        <div class="card">
          <h3 style="margin:0 0 10px">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
          <form id="regForm" class="stack">
            <input id="regName" type="text" placeholder="–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è" required />
            <input id="regEmail" type="email" placeholder="–ò–º–µ–π–ª" required />
            <div class="row">
              <select id="regDay" required></select>
              <select id="regMonth" required></select>
              <select id="regYear" required></select>
            </div>
            <input id="regPass" type="password" placeholder="–ü–∞—Ä–æ–ª–∞" required />
            <label class="muted" style="display:flex;gap:8px;align-items:flex-start">
              <input id="reg16" type="checkbox" required style="margin-top:4px" />
              –ü–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞—à, —á–µ —Å–∏ –Ω–∞ 16+ –≥–æ–¥–∏–Ω–∏.
            </label>
            <button id="regBtn" class="btn" type="submit">–°—ä–∑–¥–∞–π –ø—Ä–æ—Ñ–∏–ª</button>
            <div id="regMsg" class="msg"></div>
          </form>
        </div>
      </div>
    </section>
  </div>

  <script>
    // === –ù–ê–°–¢–†–û–ô–ö–ê: —Å–ª–æ–∂–∏ —Ç—É–∫ —Ç–æ—á–Ω–∏—è –±–µ–∫–µ–Ω–¥ URL, –∞–∫–æ –µ —Ä–∞–∑–ª–∏—á–µ–Ω ===
    const API_URL = "https://backend-for-youvibe.onrender.com";

    // SPA hash routing (/#/, /#/auth)
    const pages = { home: document.getElementById('page-home'), auth: document.getElementById('page-auth') };
    function renderRoute(){
      const hash = (location.hash || '#/').replace('#','');
      Object.values(pages).forEach(p => p.classList.add('hide'));
      if(hash.startsWith('/auth')) pages.auth.classList.remove('hide');
      else pages.home.classList.remove('hide');
    }
    window.addEventListener('hashchange', renderRoute);
    renderRoute();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –¥–µ–Ω/–º–µ—Å–µ—Ü/–≥–æ–¥–∏–Ω–∞ —Å –æ–ø—Ä–æ—Å—Ç–µ–Ω–∏ —Å–ø–∏—Å—ä—Ü–∏ (—Ä–∞–±–æ—Ç–∏ –¥–æ–±—Ä–µ –Ω–∞ –º–æ–±–∏–ª–Ω–∏)
    (function initDOB(){
      const dSel = document.getElementById('regDay');
      const mSel = document.getElementById('regMonth');
      const ySel = document.getElementById('regYear');
      const months = ['1','2','3','4','5','6','7','8','9','10','11','12'];
      for(let d=1; d<=31; d++){ const o=document.createElement('option'); o.value=o.text=d; dSel.appendChild(o); }
      months.forEach(m=>{ const o=document.createElement('option'); o.value=o.text=m; mSel.appendChild(o); });
      const thisYear = new Date().getFullYear();
      for(let y=thisYear-16; y>=1950; y--){ const o=document.createElement('option'); o.value=o.text=y; ySel.appendChild(o); }
    })();

    // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å –∑–∞ API
    (async function checkApi(){
      const el = document.getElementById('apiStatus');
      try{
        const res = await fetch(API_URL + '/', {headers:{'Accept':'application/json'}});
        if(res.ok){ el.textContent = 'API: –Ω–∞–ª–∏—á–µ–Ω ‚úÖ'; el.className = 'msg ok'; }
        else{ el.textContent = 'API: –ø—Ä–æ–±–ª–µ–º ('+res.status+')'; el.className='msg err'; }
      }catch(e){ el.textContent = 'API: –Ω–µ–¥–æ—Å—Ç—ä–ø–µ–Ω'; el.className='msg err'; }
    })();

    // –î–µ–º–æ –Ω–æ–≤–∏–Ω–∏ (–º–æ–∂–µ—à –¥–∞ –≥–∏ –≤—ä—Ä–∂–µ—à –∫—ä–º —Ç–≤–æ–π endpoint –ø–æ-–∫—ä—Å–Ω–æ)
    (function renderNews(){
      const news = [
        {t:'–î–æ–±—Ä–µ –¥–æ—à—ä–ª –≤ YouVibe üéâ', d:'–°—ä–∑–¥–∞–π –ø—Ä–æ—Ñ–∏–ª –∏ –≥—Ä–∞–±–Ω–∏ –Ω–∞—á–∞–ª–µ–Ω –±–æ–Ω—É—Å VC.'},
        {t:'LIVE –±–∏—Ç–∫–∏', d:'–°–∫–æ—Ä–æ ‚Äì –¥–∞—Ä–µ–Ω–∏—è –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ –∏ –∫–ª–∞—Å–∞—Ü–∏–∏.'}
      ];
      const wrap = document.getElementById('newsList');
      news.forEach(n=>{
        const div = document.createElement('div');
        div.className='news-item';
        div.innerHTML = `<strong>${n.t}</strong><div class="muted" style="margin-top:6px">${n.d}</div>`;
        wrap.appendChild(div);
      });
    })();

    // AUTH ‚Äî login
    document.getElementById('loginForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const btn = document.getElementById('loginBtn');
      const msg = document.getElementById('loginMsg');
      msg.textContent=''; btn.disabled=true;
      try{
        const payload = {
          email: document.getElementById('loginEmail').value.trim(),
          password: document.getElementById('loginPass').value
        };
        const r = await fetch(API_URL+'/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
        const data = await r.json().catch(()=>({}));
        if(r.ok){
          msg.textContent='–£—Å–ø–µ—à–µ–Ω –≤—Ö–æ–¥!'; msg.className='msg ok';
          if(data.token) localStorage.setItem('youvibe_token', data.token);
          // –≤—Ä—ä—â–∞–º–µ –∫—ä–º –Ω–∞—á–∞–ª–æ—Ç–æ
          location.hash = '#/';
        }else{
          msg.textContent = data?.message || '–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥.'; msg.className='msg err';
        }
      }catch(err){
        msg.textContent='–ú—Ä–µ–∂–æ–≤–∞ –≥—Ä–µ—à–∫–∞.'; msg.className='msg err';
      }finally{ btn.disabled=false; }
    });

    // AUTH ‚Äî register
    document.getElementById('regForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const btn = document.getElementById('regBtn');
      const msg = document.getElementById('regMsg');
      msg.textContent=''; btn.disabled=true;

      const name  = document.getElementById('regName').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const pass  = document.getElementById('regPass').value;
      const day   = document.getElementById('regDay').value;
      const month = document.getElementById('regMonth').value;
      const year  = document.getElementById('regYear').value;
      const ok16  = document.getElementById('reg16').checked;

      if(!ok16){ msg.textContent='–¢—Ä—è–±–≤–∞ –¥–∞ –ø–æ—Ç–≤—ä—Ä–¥–∏—à 16+.'; msg.className='msg warn'; btn.disabled=false; return; }

      try{
        const payload = { name, email, password: pass, dob: { day:Number(day), month:Number(month), year:Number(year) } };
        const r = await fetch(API_URL+'/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
        const data = await r.json().catch(()=>({}));
        if(r.ok){
          msg.textContent='–ü—Ä–æ—Ñ–∏–ª—ä—Ç –µ —Å—ä–∑–¥–∞–¥–µ–Ω!'; msg.className='msg ok';
        }else{
          msg.textContent = data?.message || '–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.'; msg.className='msg err';
        }
      }catch(err){
        msg.textContent='–ú—Ä–µ–∂–æ–≤–∞ –≥—Ä–µ—à–∫–∞.'; msg.className='msg err';
      }finally{ btn.disabled=false; }
    });
  </script>
</body>
</html>
